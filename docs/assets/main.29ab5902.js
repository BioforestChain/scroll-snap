import{p as t,c as e,L as n,h as i}from"./vendor.a33a6d70.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,l=(t,e,n,i)=>{for(var l,s=i>1?void 0:i?r(e,n):e,c=t.length-1;c>=0;c--)(l=t[c])&&(s=(i?l(e,n,s):l(s))||s);return i&&s&&o(e,n,s),s};class s extends CustomEvent{}let c=class extends n{constructor(){super(),this._direction="horizontal",this._initSlideIdx=0,this._currentLayoutIndex=0,this.initElement(),this.addEventListener("layoutchange",(t=>{var e;null==(e=this._onlayoutchange)||e.call(this,t)}))}async initElement(){await this.updateComplete;const t=this.querySelector("[name='scroll-container']");if(!t)throw new Error("Please set the attribute name='scroll-container' in you scroll template");const e=window.getComputedStyle(t,null).scrollSnapType;if(e.includes("x")?this._direction="horizontal":e.includes("y")?this._direction="vertical":console.error("This element may be doesn't work, if the value of 'scroll-snap-type' is not set or invalid."),this._initSlideIdx<0||this._initSlideIdx>=t.childElementCount)throw new Error("init-slide error.");const n=this._calcMoveDistance(t,this.initSlideIdx);"horizontal"===this._direction?t.scrollLeft+=n:t.scrollTop+=n,this.bindScrollEvent(t)}render(){return i`<slot></slot>`}get initSlideIdx(){return this._initSlideIdx}set initSlideIdx(t){this._initSlideIdx=t}get onlayoutchange(){return this._onlayoutchange||null}set onlayoutchange(t){"string"==typeof t&&(t=Function("event",`(${t})&&event.preventDefault()`)),"function"!=typeof t&&(t=void 0),this._onlayoutchange=t}async bindScrollEvent(t){t.addEventListener("scroll",(t=>{const e=t.target;if(e){const t=e.getBoundingClientRect(),n={x:t.x,y:t.y},i={x:t.x+t.width,y:t.y+t.height},o=e.childElementCount,r=e.children;for(let e=0;e<o;e++){const t=r[e],o=t.getBoundingClientRect(),l={x:o.x,y:o.y},s={x:o.x+o.width,y:o.y+o.height};if(n.x<=l.x&&n.y<=l.y&&i.x>=s.x&&i.y>=s.y){this._currentLayoutIndex=e,this._emitLayoutChange({index:e,target:t});break}}}}))}_emitLayoutChange(t){this._layoutChangeEvent=new s("layoutchange",{detail:t,cancelable:!0,bubbles:!1,composed:!0}),this.dispatchEvent(this._layoutChangeEvent)}_scrollTo(t,e){const n={behavior:"smooth"};"horizontal"===this._direction?n.left=t.scrollLeft+e:n.top=t.scrollTop+e,t.scrollTo(n)}_calcMoveDistance(t,e){const n=t.childElementCount-1;let i=(e=Math.min(Math.max(e,0),n))-this._currentLayoutIndex,o=0;for(;i;){const e=t.children[this._currentLayoutIndex+i].getBoundingClientRect();o+="horizontal"===this._direction?e.width:e.height,i>0?i--:i++}return o&&(o=e>this._currentLayoutIndex?o:-o),o}changeLayoutByIndex(t){const e=this.querySelector("[name='scroll-container']"),n=this._calcMoveDistance(e,t);this._scrollTo(e,n)}PreciousLayout(){this.changeLayoutByIndex(this._currentLayoutIndex-1)}NextLayout(){this.changeLayoutByIndex(this._currentLayoutIndex+1)}};l([t({attribute:"init-slide"})],c.prototype,"initSlideIdx",1),l([t({attribute:"onlayoutchange"})],c.prototype,"onlayoutchange",1),c=l([e("scroll-snap")],c);
